<html>
<head>
 <title>TIC TAC TOE</title>
 <style>
  #btn2
  {
   visibility:hidden;
  }
   #btn3
  {
   visibility:hidden;
  }
   #btn4
  {
   visibility:hidden;
  }
   #btn5
  {
   visibility:hidden;
  }
   #btn6
  {
   visibility:hidden;
  }
    #i1
  {
   visibility:hidden;
  } 
  #i2
  {
   visibility:hidden;
  }
    #p1
  {
   visibility:hidden;
  }
    #p2
  {
   visibility:hidden;
  }
   #table
  {
   visibility:hidden;
  }
  #l1
  {
   visibility:hidden;
  }
   #l2
  {
   visibility:hidden;
  }
  #l3
  {
   visibility:hidden;
  }
  #l4
  {
   visibility:hidden;
  }
 </style>
</head>
<body>
<div id="p1" >  </div>
<div id="p2" > </div>
<button id="btn1"type="button" onclick="strt_gm_btn()"> Start Game </button>
<Input id="i1"  placeholder="Enter Player 1 Name"> 
<Input id="i2"  placeholder="Enter Player 2 Name"> 
<label for="btn2" id="l1" >plyr 1 play as: X</label>
<input type="radio" id="btn2" name="turn"  onclick="p(1)" >
<label for="btn3" id="l2" >eO</label>
<input type="radio" id="btn3" name="turn"   onclick="p(0)"  >
<label for="btn4" id="l3" >plyr 2 play as: X</label>
<input type="radio" id="btn4" name="turn"   onclick="p(0)"  >
<label for="btn5" id="l4" >O</label>
<input type="radio" id="btn5" name="turn"    onclick="p(1)" >
<button id="btn6"  onclick="main_game()">start</button>
<br>
<table align="center" border=5 width=30% height=60% id="table" >
<caption id="cap">TIC TAC TOE</caption>
<tr> 
<td onclick="if(fill[0]==-1){valid_click=1};if(fill[0]!=-1){valid_click=0};img(1);" align ="center"><img id="img1" width=20% height=20% src="blank.jpg"></img>
<td onclick="if(fill[1]==-1){valid_click=1};if(fill[1]!=-1){valid_click=0};img(2);" align ="center"><img id="img2" width=20% height=20% src="blank.jpg"></img>
<td onclick="if(fill[2]==-1){valid_click=1};if(fill[2]!=-1){valid_click=0};img(3);" align ="center"><img id="img3" width=20% height=20% src="blank.jpg"></img>
</tr>
<tr>
<td onclick="if(fill[3]==-1){valid_click=1};if(fill[3]!=-1){valid_click=0};img(4);" align ="center"><img id="img4" width=20% height=20% src="blank.jpg"></img>
<td onclick="if(fill[4]==-1){valid_click=1};if(fill[4]!=-1){valid_click=0};img(5);" align ="center"><img id="img5" width=20% height=20% src="blank.jpg"></img>
<td onclick="if(fill[5]==-1){valid_click=1};if(fill[5]!=-1){valid_click=0};img(6);" align ="center"><img id="img6" width=20% height=20% src="blank.jpg"></img>
</tr>
<tr>
<td onclick="if(fill[6]==-1){valid_click=1};if(fill[6]!=-1){valid_click=0};img(7);" align ="center"><img id="img7" width=20% height=20% src="blank.jpg"></img>
<td onclick="if(fill[7]==-1){valid_click=1};if(fill[7]!=-1){valid_click=0};img(8);" align ="center"><img id="img8" width=20% height=20% src="blank.jpg"></img>
<td onclick="if(fill[8]==-1){valid_click=1};if(fill[8]!=-1){valid_click=0};img(9);" align ="center"><img id="img9" width=20% height=20% src="blank.jpg"></img>
</tr>
</table>

<script>

turn =1;
valid_click=-1;
x=y=p1=p2=X_streak=O_streak="";
score_X=score_O=0;

fill = [-1,-1,-1,-1,-1,-1,-1,-1,-1]                       //-1->empty,1->X,0->O
game_end=0;
function menu()
{
for(i=1;i<=2;i++) 
{
document.getElementById("p"+i).style.visibility="hidden";
document.getElementById("p"+i).innerHTML="";
}	

for(i=1;i<=2;i++)  document.getElementById("i"+i).value="";
document.getElementById("table").style.visibility="hidden";
document.getElementById("btn1").style.visibility="visible";
X_streak=O_streak="";
score_X=score_O=0;
reset();
}

function p(a){
if(a==1) {x="X";y="O";}
else {x="O";y="X";}
document.getElementById("btn6").style.visibility="visible";
}

function strt_gm_btn()
{
for(i=1;i<=2;i++)  document.getElementById("i"+i).style.visibility="visible";
document.getElementById("btn1").style.visibility="hidden";
for(i=2;i<=5;i++) document.getElementById("btn"+i).style.visibility="visible";
document.getElementById("btn6").style.visibility="hidden";
for(i=1;i<=4;i++) document.getElementById("l"+i).style.visibility="visible";
}


function main_game()
{
if(document.getElementById("i1").value == "" || document.getElementById("i2").value == "") { alert("Please fill both Player's Names");}
else{
p1= document.getElementById("i1").value;
p2=document.getElementById("i2").value;
document.getElementById("table").style.visibility="visible";
for(i=1;i<=2;i++) document.getElementById("p" + i).style.visibility="visible";
for(i=1;i<=2;i++){
 document.getElementById("i" + i).style.visibility="hidden";
}
for(i=1;i<=6;i++) document.getElementById("btn" + i).style.visibility="hidden";
for(i=1;i<=4;i++) document.getElementById("l" + i).style.visibility="hidden";
document.getElementById("p1").innerHTML = p1 +"(playing as "+ x +")"+ " : " +(x=="X"?score_X:score_O) + "(" + (x=="X"?X_streak:O_streak) +")";
document.getElementById("p2").innerHTML = p2 +"(playing as "+ y +")"+ " : " +(x=="X"?score_O:score_X)+ "(" + (x=="X"?O_streak:X_streak) +")";
}}

window.onclick = function turn_switch()
{
if(valid_click==1){
turn==1? turn=0:turn=1;
valid_click=0;
}}

window.onkeypress = function myFunction(event) {
  var x = event.which || event.keyCode;
 if(x==32 && game_end==1){menu();}
 if((x==114 || x==82) && game_end==1){reset();}

}

function reset()
{

for(i=1;i<=9;i++)
{
document.getElementById("img"+i).src = "blank.jpg";
}
fill = [-1,-1,-1,-1,-1,-1,-1,-1,-1]
turn=1;      
document.getElementById("p1").innerHTML = p1 +"(playing as "+ x +")"+ " : " +(x=="X"?score_X:score_O) + "(" + (x=="X"?X_streak:O_streak) +")";
document.getElementById("p2").innerHTML = p2 +"(playing as "+ y +")"+ " : " +(x=="X"?score_O:score_X)+ "(" + (x=="X"?O_streak:X_streak) +")";
document.getElementById("cap").innerHTML = "TIC TAC TOE";
game_end=0;
}

function win_check()
{
if( ((fill[0] == 1) && (fill[1] == 1) && (fill[2] == 1))||((fill[3] == 1) && (fill[4] == 1) && (fill[5] == 1))||((fill[6] == 1) && (fill[7] == 1) && (fill[8] == 1))||((fill[0] == 1) && (fill[3] == 1) && (fill[6] == 1))||((fill[1] == 1) && (fill[4] == 1) && (fill[7] == 1))||((fill[2] == 1) && (fill[5] == 1) && (fill[8] == 1))||((fill[0] == 1) && (fill[4] == 1) && (fill[8] == 1))||((fill[2] == 1) && (fill[4] == 1) && (fill[6] == 1)) )
{
fill = [1,1,1,1,1,1,1,1,1];
if(game_end == 0){
score_X++;
X_streak += "W " 
O_streak += "L "
}
setTimeout(win,100);
function win()
{if(x=="X"){
alert(p1+ " wins");
document.getElementById("cap").innerHTML = p1 + " Won.Press <b>R</b> to reset.Press <b>Space Bar</b> to go back to the menu.";
}
else{
alert(p2+ " wins");
document.getElementById("cap").innerHTML = p2 + " Won.Press <b>R</b> to reset.Press <b>Space Bar</b> to go back to the menu.";
}
game_end=1;
}
}
else if( ((fill[0] == 0) && (fill[1] == 0) && (fill[2] == 0))||((fill[3] == 0) && (fill[4] == 0) && (fill[5] == 0))||((fill[6] == 0) && (fill[7] == 0) && (fill[8] == 0))||((fill[0] == 0) && (fill[3] == 0) && (fill[6] == 0))||((fill[1] == 0) && (fill[4] == 0) && (fill[7] == 0))||((fill[2] == 0) && (fill[5] == 0) && (fill[8] == 0))||((fill[0] == 0) && (fill[4] == 0) && (fill[8] == 0))||((fill[2] == 0) && (fill[4] == 0) && (fill[6] == 0)) )
{
fill = [1,1,1,1,1,1,1,1,1];
if(game_end == 0){
score_O++;
X_streak += "L " 
O_streak += "W "
}
setTimeout(win,100);
function win()
{if(x=="X"){
alert(p2+ " wins");
document.getElementById("cap").innerHTML = p2 + " Won.Press <b>R</b> to reset.Press <b>Space Bar</b> to go back to the menu.";
}
else{
alert(p1+ " wins");
document.getElementById("cap").innerHTML = p1 + " Won.Press <b>R</b> to reset.Press <b>Space Bar</b> to go back to the menu.";

}game_end=1;
}
}
else if(fill[0]!=-1 && fill[1]!=-1 && fill[2]!=-1 && fill[3]!=-1 && fill[4]!=-1 && fill[5]!=-1 && fill[6]!=-1 && fill[7]!=-1 && fill[8]!=-1 )
{
if(game_end == 0){

X_streak += "D " 
O_streak += "D "
}
setTimeout(win,100);
function win()
{alert("Draw");
document.getElementById("cap").innerHTML = "Draw.Press <b>R</b> to reset.Press <b>Space Bar</b> to go back to the menu.";
game_end=1;
}
}

}

function img(i){
if(fill[i-1]==-1){
if(turn==1){document.getElementById("img"+i).src = "X.jpg";fill[i-1]=1;}
else{document.getElementById("img"+i).src = "O.jpg";fill[i-1]=0;}
}
win_check()
}

</script>
</body>
</html>
